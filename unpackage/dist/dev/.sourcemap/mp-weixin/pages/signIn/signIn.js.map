{"version":3,"sources":["webpack:///F:/HBuilderX/智慧公寓/pages/signIn/signIn.vue?789e","webpack:///F:/HBuilderX/智慧公寓/pages/signIn/signIn.vue?b85c","webpack:///F:/HBuilderX/智慧公寓/pages/signIn/signIn.vue?9bb7","webpack:///F:/HBuilderX/智慧公寓/pages/signIn/signIn.vue?940c","webpack:///F:/HBuilderX/智慧公寓/pages/signIn/signIn.vue"],"names":["_this","QQMapWX","require","qqmapsdk","components","flSignin","data","recommend","address","date","list","user_id","user_lat","user_lng","mounted","USERID","uni","getStorageSync","allParams","url","setUpUrl","type","sCallback","console","log","code","sign_year","sign_month","redirectTo","success","showModal","title","content","info","$base","request","methods","getLocation","wx","isHighAccuracy","highAccuracyExpireTime","res","latitude","longitude","reverseGeocoder","location","addressRes","result","formatted_addresses","fail","error","status","message","signin_fun","showToast","icon","duration","sign_day","push","day","onLoad","key","onShow"],"mappings":"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","file":"pages/signIn/signIn.js","sourcesContent":["import { render, staticRenderFns } from \"./signIn.vue?vue&type=template&id=1e6511d0&\"\nimport script from \"./signIn.vue?vue&type=script&lang=js&\"\nexport * from \"./signIn.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('1e6511d0', component.options)\n    } else {\n      api.reload('1e6511d0', component.options)\n    }\n    module.hot.accept(\"./signIn.vue?vue&type=template&id=1e6511d0&\", function () {\n      api.rerender('1e6511d0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/HBuilderX/智慧公寓/pages/signIn/signIn.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./signIn.vue?vue&type=template&id=1e6511d0&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./signIn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./signIn.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar _this;\nvar QQMapWX = require('@/components/qqmap/qqmap-wx-jssdk.min.js');\nvar qqmapsdk;\nimport flSignin from '../../components/fl-signin/fl-signin.vue'\nexport default {\n\tcomponents: {\n\t\tflSignin,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\trecommend: '获取中',\n\t\t\taddress: '...',\n\t\t\t// 当前日期\n\t\t\tdate: null,\n\t\t\t// 签到成功列表\n\t\t\tlist: [],\n\t\t\tuser_id: null,\n\t\t\tuser_lat: null, //纬度\n\t\t\tuser_lng: null, //经度\n\t\t}\n\t},\n\tmounted() {\n\t\t_this = this;\n\t\tlet USERID = uni.getStorageSync(\"USERID\");\n\t\t_this.user_id = USERID;\n\t\tvar allParams = {\n\t\t\turl: 'getDateAndSignInfo',\n\t\t\tsetUpUrl: true,\n\t\t\ttype: 'get',\n\t\t\tdata: {\n\t\t\t\tuser_id: _this.user_id\n\t\t\t},\n\t\t\tsCallback: function(data) {\n\t\t\t\tconsole.log(data);\n\t\t\t\tif (data.code == 0) {\n\t\t\t\t\t_this.date = data.sign_year + \"-\" + data.sign_month;\n\t\t\t\t\t_this.list = data.list;\n\t\t\t\t} else {\n\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\turl: '../main/main',\n\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: '获取数据异常',\n\t\t\t\t\t\t\t\tcontent: data.info\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\t_this.$base.request(allParams, _this);\n\n\t},\n\tmethods: {\n\t\t//获取用户当前地址\n\t\tgetLocation() {\n\t\t\t_this.recommend = '获取中';\n\t\t\t_this.address = '...';\n\t\t\t_this.user_lat = null;\n\t\t\t_this.user_lng = null;\n\t\t\twx.getLocation({\n\t\t\t\ttype: 'gcj02',\n\t\t\t\tisHighAccuracy:true,\n\t\t\t\thighAccuracyExpireTime:3000,\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t_this.user_lat = res.latitude;\n\t\t\t\t\t_this.user_lng = res.longitude;\n\t\t\t\t\tqqmapsdk.reverseGeocoder({\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\tlatitude: res.latitude,\n\t\t\t\t\t\t\tlongitude: res.longitude\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: function(addressRes) {\n\t\t\t\t\t\t\tvar addressRes = addressRes.result;\n\t\t\t\t\t\t\tconsole.log(addressRes.address)\n\t\t\t\t\t\t\t_this.address = addressRes.address;\n\t\t\t\t\t\t\t_this.recommend = addressRes.formatted_addresses.recommend;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail: function(error) {\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: '获取位置异常',\n\t\t\t\t\t\t\t\tcontent: error.status + \"|\" + error.message\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomponents: function() {\n\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 签到时触发\n\t\tsignin_fun(res) {\n\t\t\tif (_this.user_lat == null || _this.user_lng == null) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '位置数据获取异常，请刷新当前位置',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 4000\n\t\t\t\t})\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (_this.user_id == null || _this.user_id == '') {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '用户工号获取失败，请退出后重试',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 3000\n\t\t\t\t})\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar allParams = {\n\t\t\t\turl: 'addSignInWithUserAndDate',\n\t\t\t\tsetUpUrl: true,\n\t\t\t\ttype: 'get',\n\t\t\t\tdata: {\n\t\t\t\t\tuser_lat: _this.user_lat,\n\t\t\t\t\tuser_lng: _this.user_lng,\n\t\t\t\t\tuser_id: _this.user_id,\n\t\t\t\t\tsign_year: null, //使用服务器的年份\n\t\t\t\t\tsign_month: null, //使用服务器的月份\n\t\t\t\t\tsign_day: null, //使用服务器的日期\n\t\t\t\t\t//sign_day: res.day\n\t\t\t\t},\n\t\t\t\tsCallback: function(data) {\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t\tif (data.code == 0) {\n\t\t\t\t\t\t_this.list.push(res.day);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"签到成功\",\n\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '签到异常',\n\t\t\t\t\t\t\tcontent: data.info\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t_this.$base.request(allParams, _this);\n\n\n\t\t},\n\n\t},\n\tonLoad: function() {\n\t\t_this = this;\n\t\tqqmapsdk = new QQMapWX({\n\t\t\tkey: 'UQ6BZ-3E3K6-JTBSX-EKVZC-4BTRO-DDBTE'\n\t\t});\n\n\t},\n\tonShow: function() {\n\t\t_this = this;\n\t\tthis.getLocation();\n\t}\n}\n"],"sourceRoot":""}