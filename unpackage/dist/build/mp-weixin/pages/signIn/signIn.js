(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/signIn/signIn"],{"0514":function(n,e,t){"use strict";(function(n){var o;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,u=t("65c8"),i=function(){return t.e("components/fl-signin/fl-signin").then(t.bind(null,"8602"))},l={components:{flSignin:i},data:function(){return{recommend:"获取中",address:"...",date:null,list:[],user_id:null,user_lat:null,user_lng:null}},mounted:function(){o=this;var e=n.getStorageSync("USERID");o.user_id=e;var t={url:"getDateAndSignInfo",setUpUrl:!0,type:"get",data:{user_id:o.user_id},sCallback:function(e){console.log(e),0==e.code?(o.date=e.sign_year+"-"+e.sign_month,o.list=e.list):n.redirectTo({url:"../main/main",success:function(){n.showModal({title:"获取数据异常",content:e.info})}})}};o.$base.request(t,o)},methods:{getLocation:function(){o.recommend="获取中",o.address="...",o.user_lat=null,o.user_lng=null,wx.getLocation({type:"gcj02",isHighAccuracy:!0,highAccuracyExpireTime:3e3,success:function(e){o.user_lat=e.latitude,o.user_lng=e.longitude,s.reverseGeocoder({location:{latitude:e.latitude,longitude:e.longitude},success:function(n){n=n.result;console.log(n.address),o.address=n.address,o.recommend=n.formatted_addresses.recommend},fail:function(e){n.showModal({title:"获取位置异常",content:e.status+"|"+e.message})},components:function(){}})}})},signin_fun:function(e){if(null!=o.user_lat&&null!=o.user_lng)if(null!=o.user_id&&""!=o.user_id){var t={url:"addSignInWithUserAndDate",setUpUrl:!0,type:"get",data:{user_lat:o.user_lat,user_lng:o.user_lng,user_id:o.user_id,sign_year:null,sign_month:null,sign_day:null},sCallback:function(t){console.log(t),0==t.code?(o.list.push(e.day),n.showToast({title:"签到成功",icon:"none"})):n.showModal({title:"签到异常",content:t.info})}};o.$base.request(t,o)}else n.showToast({title:"用户工号获取失败，请退出后重试",icon:"none",duration:3e3});else n.showToast({title:"位置数据获取异常，请刷新当前位置",icon:"none",duration:4e3})}},onLoad:function(){o=this,s=new u({key:"UQ6BZ-3E3K6-JTBSX-EKVZC-4BTRO-DDBTE"})},onShow:function(){o=this,this.getLocation()}};e.default=l}).call(this,t("543d")["default"])},"2ca4":function(n,e,t){"use strict";var o=function(){var n=this,e=n.$createElement;n._self._c},s=[];t.d(e,"a",function(){return o}),t.d(e,"b",function(){return s})},dfaa:function(n,e,t){"use strict";t.r(e);var o=t("0514"),s=t.n(o);for(var u in o)"default"!==u&&function(n){t.d(e,n,function(){return o[n]})}(u);e["default"]=s.a},e123:function(n,e,t){"use strict";t.r(e);var o=t("2ca4"),s=t("dfaa");for(var u in s)"default"!==u&&function(n){t.d(e,n,function(){return s[n]})}(u);var i=t("2877"),l=Object(i["a"])(s["default"],o["a"],o["b"],!1,null,null,null);e["default"]=l.exports}},[["48d1","common/runtime","common/vendor"]]]);